<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My To-Do Lists App</title>
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiTXkgVG8tRG8gTGlzdHMiLCJzaG9ydF9uYW1lIjoiVG9Eb0FwcCIsInN0YXJ0X3VybCI6Ii4iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjNjY2NmZmIiwidGhlbWVfY29sb3IiOiIjNjY2NmZmIiwiaWNvbnMiOlt7InNyYyI6ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIWnBaWGRDYjNnOUlqQWdNQ0F5TkRBZ01qUXdJaUIzYVdSMGFEMGlNalF3SWlCb1pXbG5hSFE5SWpJME1DSStQSEpsWTNRZ2QybGtkR2c5SWpJME1DSWdhR1ZwWjJoMFBTSXlOREFpSUhKNFBTSXpNaUlnWm1sc2JEMGlJell6TnpObVppSXZQand2YzNablBnPT0iLCJzaXplcyI6IjI0MHgyNDAiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9XX0=">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            background-attachment: fixed;
        }

        .app {
            min-height: 100vh;
            padding: 1rem;
            background: linear-gradient(135deg, #9333ea, #ec4899, #f97316);
        }

        .container {
            max-width: 1024px;
            margin: 0 auto;
        }

        .main-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 2rem;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            text-align: center;
            margin-bottom: 2rem;
        }

        .lists-section {
            margin-bottom: 2rem;
        }

        .lists-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .list-tab {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            font-size: 0.9rem;
        }

        .list-tab.active {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .list-tab.inactive {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
        }

        .list-tab:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .list-input-section {
            display: flex;
            gap: 0.75rem;
        }

        .list-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            outline: none;
        }

        .list-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .add-list-btn {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .add-list-btn:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, #2563eb, #7c3aed);
        }

        .progress-section {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .progress-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: white;
        }

        .progress-text {
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            height: 12px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #10b981, #3b82f6);
            height: 100%;
            transition: width 0.3s;
            border-radius: 8px;
        }

        .add-item-section {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .add-item-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 0.75rem 1rem;
            font-size: 1.1rem;
            outline: none;
        }

        .add-item-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .add-item-btn {
            background: linear-gradient(135deg, #10b981, #14b8a6);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .add-item-btn:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, #059669, #0d9488);
        }

        .items-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 12px;
            transition: all 0.3s;
        }

        .item.completed {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(20, 184, 166, 0.2));
            border-left: 4px solid #10b981;
        }

        .item.pending {
            background: rgba(255, 255, 255, 0.1);
        }

        .item.pending:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .checkbox {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.6);
            background: transparent;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .checkbox:hover {
            transform: scale(1.1);
            border-color: white;
        }

        .checkbox.checked {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }

        .item-text {
            flex: 1;
            font-size: 1.1rem;
            color: white;
            transition: all 0.3s;
        }

        .item-text.completed {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: line-through;
        }

        .delete-btn {
            background: rgba(239, 68, 68, 0.1);
            color: #fca5a5;
            border: none;
            border-radius: 8px;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .delete-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 0;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .empty-text {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.1rem;
        }

        .btn-icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        .edit-input {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.25rem 0.75rem;
            font-size: 0.9rem;
            outline: none;
        }

        .edit-actions {
            display: flex;
            gap: 0.5rem;
        }

        .edit-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            padding: 0.25rem;
            border-radius: 4px;
            transition: color 0.2s;
        }

        .edit-btn:hover {
            color: white;
        }

        .edit-btn.save { color: #10b981; }
        .edit-btn.cancel { color: #ef4444; }

        @media (max-width: 768px) {
            .main-card {
                padding: 1rem;
                border-radius: 16px;
            }
            
            .title {
                font-size: 2rem;
            }
            
            .lists-tabs {
                flex-direction: column;
            }
            
            .list-input-section,
            .add-item-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="container">
            <div class="main-card">
                <h1 class="title">✨ My To-Do Lists ✨</h1>
                
                <div class="lists-section">
                    <div class="lists-tabs" id="listsTabs"></div>
                    <div class="list-input-section">
                        <input type="text" class="list-input" id="newListInput" placeholder="New list name...">
                        <button class="add-list-btn" id="addListBtn">
                            <svg class="btn-icon" viewBox="0 0 24 24">
                                <path d="M12 5v14m-7-7h14"/>
                            </svg>
                            Add List
                        </button>
                    </div>
                </div>

                <div id="activeListContent"></div>
            </div>
        </div>
    </div>

    <script>
        class TodoApp {
            constructor() {
                this.lists = JSON.parse(localStorage.getItem('todoLists')) || [
                    { id: 1, name: 'Personal Tasks', items: [] }
                ];
                this.activeListId = parseInt(localStorage.getItem('activeListId')) || 1;
                this.editingListId = null;
                this.init();
            }

            init() {
                this.render();
                this.bindEvents();
                this.saveData();
            }

            saveData() {
                localStorage.setItem('todoLists', JSON.stringify(this.lists));
                localStorage.setItem('activeListId', this.activeListId.toString());
            }

            bindEvents() {
                document.getElementById('addListBtn').addEventListener('click', () => this.addNewList());
                document.getElementById('newListInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.addNewList();
                });
            }

            addNewList() {
                const input = document.getElementById('newListInput');
                const name = input.value.trim();
                if (name) {
                    const newList = {
                        id: Date.now(),
                        name: name,
                        items: []
                    };
                    this.lists.push(newList);
                    this.activeListId = newList.id;
                    input.value = '';
                    this.render();
                    this.saveData();
                }
            }

            deleteList(listId) {
                if (this.lists.length > 1) {
                    this.lists = this.lists.filter(list => list.id !== listId);
                    if (this.activeListId === listId) {
                        this.activeListId = this.lists[0].id;
                    }
                    this.render();
                    this.saveData();
                }
            }

            startEditingList(listId, currentName) {
                this.editingListId = listId;
                this.render();
                setTimeout(() => {
                    const input = document.querySelector('.edit-input');
                    if (input) {
                        input.value = currentName;
                        input.focus();
                    }
                }, 0);
            }

            saveListName() {
                const input = document.querySelector('.edit-input');
                const newName = input.value.trim();
                if (newName) {
                    this.lists = this.lists.map(list => 
                        list.id === this.editingListId 
                            ? { ...list, name: newName }
                            : list
                    );
                }
                this.editingListId = null;
                this.render();
                this.saveData();
            }

            cancelEditingList() {
                this.editingListId = null;
                this.render();
            }

            addItem(text) {
                if (text.trim()) {
                    const newItem = {
                        id: Date.now(),
                        text: text.trim(),
                        completed: false
                    };
                    
                    this.lists = this.lists.map(list => 
                        list.id === this.activeListId 
                            ? { ...list, items: [...list.items, newItem] }
                            : list
                    );
                    this.render();
                    this.saveData();
                }
            }

            toggleItem(itemId) {
                this.lists = this.lists.map(list => 
                    list.id === this.activeListId 
                        ? {
                            ...list, 
                            items: list.items.map(item =>
                                item.id === itemId ? { ...item, completed: !item.completed } : item
                            )
                        }
                        : list
                );
                this.render();
                this.saveData();
            }

            deleteItem(itemId) {
                this.lists = this.lists.map(list => 
                    list.id === this.activeListId 
                        ? { ...list, items: list.items.filter(item => item.id !== itemId) }
                        : list
                );
                this.render();
                this.saveData();
            }

            render() {
                this.renderListTabs();
                this.renderActiveList();
            }

            renderListTabs() {
                const tabsContainer = document.getElementById('listsTabs');
                tabsContainer.innerHTML = '';

                this.lists.forEach(list => {
                    const tabDiv = document.createElement('div');
                    tabDiv.className = `list-tab ${list.id === this.activeListId ? 'active' : 'inactive'}`;

                    if (this.editingListId === list.id) {
                        tabDiv.innerHTML = `
                            <input type="text" class="edit-input" value="${list.name}">
                            <div class="edit-actions">
                                <button class="edit-btn save" onclick="app.saveListName()">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                                        <polyline points="17,21 17,13 7,13 7,21"/>
                                        <polyline points="7,3 7,8 15,8"/>
                                    </svg>
                                </button>
                                <button class="edit-btn cancel" onclick="app.cancelEditingList()">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <line x1="18" y1="6" x2="6" y2="18"/>
                                        <line x1="6" y1="6" x2="18" y2="18"/>
                                    </svg>
                                </button>
                            </div>
                        `;

                        const input = tabDiv.querySelector('.edit-input');
                        input.addEventListener('keypress', (e) => {
                            if (e.key === 'Enter') this.saveListName();
                            if (e.key === 'Escape') this.cancelEditingList();
                        });
                    } else {
                        tabDiv.innerHTML = `
                            <span onclick="app.activeListId = ${list.id}; app.render();">${list.name}</span>
                            <button class="edit-btn" onclick="app.startEditingList(${list.id}, '${list.name}')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 20h9"/>
                                    <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                                </svg>
                            </button>
                            ${this.lists.length > 1 ? `
                                <button class="edit-btn" onclick="app.deleteList(${list.id})">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                        <polyline points="3,6 5,6 21,6"/>
                                        <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                                        <line x1="10" y1="11" x2="10" y2="17"/>
                                        <line x1="14" y1="11" x2="14" y2="17"/>
                                    </svg>
                                </button>
                            ` : ''}
                        `;
                    }

                    tabsContainer.appendChild(tabDiv);
                });
            }

            renderActiveList() {
                const activeList = this.lists.find(list => list.id === this.activeListId);
                const container = document.getElementById('activeListContent');

                if (!activeList) {
                    container.innerHTML = '<p class="empty-text">No list found</p>';
                    return;
                }

                const completedCount = activeList.items.filter(item => item.completed).length;
                const totalCount = activeList.items.length;
                const progressPercent = totalCount > 0 ? (completedCount / totalCount) * 100 : 0;

                container.innerHTML = `
                    <div class="progress-section">
                        <div class="progress-header">
                            <h2 class="progress-title">${activeList.name}</h2>
                            <span class="progress-text">${completedCount} / ${totalCount} completed</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progressPercent}%"></div>
                        </div>
                    </div>

                    <div class="add-item-section">
                        <input type="text" class="add-item-input" id="newItemInput" placeholder="Add a new task...">
                        <button class="add-item-btn" id="addItemBtn">
                            <svg class="btn-icon" viewBox="0 0 24 24">
                                <path d="M12 5v14m-7-7h14"/>
                            </svg>
                            Add
                        </button>
                    </div>

                    <div class="items-list">
                        ${activeList.items.length === 0 ? `
                            <div class="empty-state">
                                <div class="empty-icon">📝</div>
                                <p class="empty-text">No tasks yet. Add one above!</p>
                            </div>
                        ` : activeList.items.map(item => `
                            <div class="item ${item.completed ? 'completed' : 'pending'}">
                                <div class="checkbox ${item.completed ? 'checked' : ''}" onclick="app.toggleItem(${item.id})">
                                    ${item.completed ? '✓' : ''}
                                </div>
                                <span class="item-text ${item.completed ? 'completed' : ''}">${item.text}</span>
                                <button class="delete-btn" onclick="app.deleteItem(${item.id})">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <polyline points="3,6 5,6 21,6"/>
                                        <path d="M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/>
                                        <line x1="10" y1="11" x2="10" y2="17"/>
                                        <line x1="14" y1="11" x2="14" y2="17"/>
                                    </svg>
                                </button>
                            </div>
                        `).join('')}
                    </div>
                `;

                // Bind events for new elements
                const addItemBtn = document.getElementById('addItemBtn');
                const newItemInput = document.getElementById('newItemInput');

                addItemBtn.addEventListener('click', () => {
                    this.addItem(newItemInput.value);
                    newItemInput.value = '';
                });

                newItemInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.addItem(newItemInput.value);
                        newItemInput.value = '';
                    }
                });
            }
        }

        // Initialize the app
        const app = new TodoApp();

        // PWA Service Worker registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:application/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCJpbnN0YWxsIiwgZXZlbnQgPT4ge2V2ZW50LndhaXRVbnRpbChzZWxmLnNraXBXYWl0aW5nKCkpO30pOw==');
        }
    </script>
</body>
</html>